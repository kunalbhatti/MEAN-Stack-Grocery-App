{"version":3,"sources":["./src/app/auth/login/login-routing.module.ts","./src/app/auth/login/login.page.css","./src/app/auth/login/login.page.html","./src/app/auth/login/login.module.ts","./src/app/auth/login/login.page.ts"],"names":[],"mappings":"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","file":"login-login-module.js","sourcesContent":["import {\n  NgModule\n} from \"@angular/core\";\nimport {\n  RouterModule,\n  Routes\n} from \"@angular/router\";\nimport {\n  LoginPage\n} from \"./login.page\";\n\nconst routes: Routes = [{\n  path: '',\n  component: LoginPage\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule {\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5wYWdlLmNzcyJ9 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Grocery App</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-grid style=\\\"height: 100%;\\\">\\n    <ion-row class=\\\"ion-justify-content-center\\\" style=\\\"height: 100%; align-content: center;\\\">\\n      <ion-col size=\\\"12\\\" size-sm=\\\"10\\\" size-md=\\\"8\\\" size-lg=\\\"6\\\" size-xl=\\\"4\\\" class=\\\"ion-no-padding\\\">\\n        <ion-toolbar>\\n          <ion-title class=\\\"ion-text-center ion-padding\\\" style=\\\"border-bottom: 1px solid;\\\">Login</ion-title>\\n        </ion-toolbar>\\n        <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Email</ion-label>\\n            <ion-input type=\\\"email\\\" formControlName=\\\"email\\\" email required></ion-input>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">Password</ion-label>\\n            <ion-input type=\\\"password\\\" formControlName=\\\"password\\\" required></ion-input>\\n          </ion-item>\\n          <ion-button type=\\\"submit\\\" expand=\\\"full\\\" class=\\\"ion-no-margin\\\">Login</ion-button>\\n        </form>\\n        <div style=\\\"text-align: center;\\\">\\n          <ion-text color=\\\"danger\\\">\\n            <small>\\n              {{errorMessage}}\\n            </small>\\n          </ion-text>\\n        </div>\\n      </ion-col>\\n      <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n        <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" [routerLink]=\\\"['/', 'auth', 'register']\\\"><small>Register</small>\\n        </ion-button>\\n        <ion-button fill=\\\"clear\\\" color=\\\"primary\\\" [routerLink]=\\\"['/', 'auth', 'recover-password']\\\"><small>Forgot\\n            Password</small>\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","import {\n  CommonModule\n} from \"@angular/common\";\nimport {\n  NgModule\n} from \"@angular/core\";\nimport {\n  ReactiveFormsModule\n} from \"@angular/forms\";\nimport {\n  IonicModule\n} from \"@ionic/angular\";\nimport {\n  LoginRoutingModule\n} from \"./login-routing.module\";\nimport {\n  LoginPage\n} from \"./login.page\";\n\n@NgModule({\n  declarations: [LoginPage],\n  imports: [CommonModule, ReactiveFormsModule, IonicModule, LoginRoutingModule],\n})\nexport class LoginModule {\n\n}\n","import {\n  Component,\n  OnInit\n} from \"@angular/core\";\nimport {\n  FormControl,\n  FormGroup\n} from \"@angular/forms\";\nimport {\n  Router\n} from \"@angular/router\";\nimport {\n  AlertController,\n} from \"@ionic/angular\";\nimport {\n  take\n} from \"rxjs/operators\";\nimport {\n  AuthService\n} from \"src/app/services/auth.service\";\n\n@Component({\n  selector: 'app-login',\n  templateUrl: 'login.page.html',\n  styleUrls: ['login.page.css']\n})\nexport class LoginPage implements OnInit {\n\n  loginForm = new FormGroup({\n    email: new FormControl(),\n    password: new FormControl()\n  });\n\n  errorMessage: string;\n\n  constructor(private authService: AuthService, private router: Router, private alertController: AlertController) {}\n\n  ngOnInit() {}\n\n  onSubmit() {\n    const body = this.loginForm.value;\n\n    this.authService.login(body).pipe(take(1)).subscribe(\n      (user: {\n        auth: boolean,\n        activated: boolean,\n        token: string\n      }) => {\n        if (user.auth && user.activated) {\n          localStorage.setItem('groceryApp-token', user.token);\n          this.router.navigate(['/', 'app']);\n        } else if (!user.activated) {\n          this.alertController.create({\n            header: 'Account Inactive',\n            message: 'Please activate your account to continue.',\n            buttons: [{\n              text: 'Cancel',\n              role: 'cancel'\n            }, {\n              text: 'Ok',\n              handler: () => {\n                this.router.navigate(['/', 'auth', 'activate-account', body.email])\n              }\n            }]\n          }).then((alertEl: HTMLIonAlertElement) => {\n            alertEl.present();\n          });\n        }\n      }, (error: string) => {\n        this.errorMessage = error;\n      }\n    );\n  }\n}\n"],"sourceRoot":"webpack:///"}