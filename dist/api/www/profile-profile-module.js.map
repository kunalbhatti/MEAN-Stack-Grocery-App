{"version":3,"sources":["./src/app/main/settings/profile/profile.page.scss","./src/app/main/settings/profile/profile.module.ts","./src/app/main/settings/profile/profile.page.html","./src/app/main/settings/profile/profile-routing.module.ts","./src/app/main/settings/profile/profile.page.ts"],"names":[],"mappings":"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","file":"profile-profile-module.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWxlLnBhZ2Uuc2NzcyJ9 */\";","import {\n  NgModule\n} from '@angular/core';\nimport {\n  CommonModule\n} from '@angular/common';\nimport {\n  FormsModule,\n  ReactiveFormsModule\n} from '@angular/forms';\n\nimport {\n  IonicModule\n} from '@ionic/angular';\n\nimport {\n  ProfilePageRoutingModule\n} from './profile-routing.module';\n\nimport {\n  ProfilePage\n} from './profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ProfilePageRoutingModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-grid>\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <ion-col size=\\\"12\\\" size-sm=\\\"10\\\" size-md=\\\"8\\\">\\n\\n        <ion-toolbar size=\\\"12\\\" class=\\\"ion-text-center ion-margin-top\\\" style=\\\"background-color: #1f1f1f;\\\">\\n          <ion-title>Name</ion-title>\\n          <ion-buttons slot=\\\"primary\\\">\\n            <ion-button (click)=\\\"updateNameForm = !updateNameForm\\\">\\n              <ion-icon name=\\\"create-outline\\\" *ngIf=\\\"!updateNameForm\\\"></ion-icon>\\n              <ion-icon name=\\\"close\\\" *ngIf=\\\"updateNameForm\\\"></ion-icon>\\n            </ion-button>\\n          </ion-buttons>\\n        </ion-toolbar>\\n\\n        <ion-row style=\\\"background-color: rgb(40, 41, 44);\\\" class=\\\"ion-justify-content-center\\\">\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"updateNameForm\\\">\\n            <form #updateNameForm=\\\"ngForm\\\" (ngSubmit)=\\\"updateName(updateNameForm)\\\">\\n              <ion-item lines=\\\"none\\\">\\n                <ion-input name=\\\"name\\\" ngModel [placeholder]=\\\"userName\\\" required minlength=\\\"2\\\" maxlength=\\\"20\\\" required>\\n                </ion-input>\\n                <ion-button type=\\\"submit\\\" fill=\\\"clear\\\" color=\\\"dark\\\" [disabled]=\\\"updateNameForm.invalid\\\"\\n                  [disabled]=\\\"updateNameForm.invalid\\\">\\n                  Update\\n                </ion-button>\\n              </ion-item>\\n            </form>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"!updateNameForm\\\">\\n            <ion-item>\\n              <ion-label>{{userName | titlecase}}</ion-label>\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n\\n        <ion-toolbar size=\\\"12\\\" class=\\\"ion-text-center ion-margin-top\\\" style=\\\"background-color: #1f1f1f;\\\">\\n          <ion-title>Password</ion-title>\\n          <ion-buttons slot=\\\"primary\\\">\\n            <ion-button (click)=\\\"updatePasswordForm = !updatePasswordForm\\\">\\n              <ion-icon name=\\\"create-outline\\\" *ngIf=\\\"!updatePasswordForm\\\"></ion-icon>\\n              <ion-icon name=\\\"close\\\" *ngIf=\\\"updatePasswordForm\\\"></ion-icon>\\n            </ion-button>\\n          </ion-buttons>\\n        </ion-toolbar>\\n\\n        <ion-row style=\\\"background-color: rgb(40, 41, 44);\\\" class=\\\"ion-justify-content-center\\\">\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"updatePasswordForm\\\" class=\\\"ion-text-center\\\">\\n            <form [formGroup]=\\\"passwordResetForm\\\" (ngSubmit)=\\\"updatePassword(passwordResetForm)\\\">\\n              <ion-item lines=\\\"none\\\">\\n                <ion-label position=\\\"floating\\\">Old Password</ion-label>\\n                <ion-input name=\\\"oldPassword\\\" type=\\\"password\\\" formControlName=\\\"oldPassword\\\" required minlength=\\\"6\\\"\\n                  maxlength=\\\"12\\\" required>\\n                </ion-input>\\n              </ion-item>\\n              <ion-item lines=\\\"none\\\">\\n                <ion-label position=\\\"floating\\\">New Password\\n                  <small style=\\\"color: #ff4961\\\"\\n                    *ngIf=\\\"passwordResetForm.errors?.passwordNotChanged && passwordResetForm.get('newPassword').dirty\\\">\\n                    (Same as old password)</small>\\n                </ion-label>\\n                <ion-input name=\\\"newPassword\\\" formControlName=\\\"newPassword\\\" type=\\\"password\\\" required minlength=\\\"6\\\"\\n                  maxlength=\\\"12\\\" required>\\n                </ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label position=\\\"floating\\\">Confirm Password\\n                  <small style=\\\"color: #ff4961\\\"\\n                    *ngIf=\\\"passwordResetForm.errors?.invalidPassword && passwordResetForm.get('confirmPassword').dirty\\\">\\n                    (Passwords do not match)</small>\\n                </ion-label>\\n                <ion-input name=\\\"confirmPassword\\\" formControlName=\\\"confirmPassword\\\" type=\\\"password\\\" required\\n                  minlength=\\\"6\\\" maxlength=\\\"12\\\" required>\\n                </ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-row class=\\\"ion-justify-content-center\\\" style=\\\"width: 100%;\\\">\\n                  <ion-button type=\\\"submit\\\" fill=\\\"clear\\\" color=\\\"dark\\\" [disabled]=\\\"passwordResetForm.invalid\\\">\\n                    Update\\n                  </ion-button>\\n                </ion-row>\\n              </ion-item>\\n            </form>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"!updatePasswordForm\\\">\\n            <ion-item>\\n              ******\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n\\n\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","import {\n  Component,\n  OnInit\n} from '@angular/core';\nimport {\n  AbstractControl,\n  FormBuilder,\n  FormControl,\n  NgForm,\n  ValidationErrors,\n  ValidatorFn,\n  Validators\n} from '@angular/forms';\nimport {\n  take\n} from 'rxjs/operators';\nimport {\n  AuthService\n} from './../../../services/auth.service';\nimport {\n  ToasterService\n} from './../../../services/toaster.service';\n\n\nconst checkPasswordChanged: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\n  const oldPassword: AbstractControl = control.get('oldPassword');\n  const newPassword: AbstractControl = control.get('newPassword');\n\n  if (oldPassword.value !== newPassword.value) {\n    return null;\n  } else {\n    return {\n      passwordNotChanged: true\n    };\n  }\n}\n\nconst comparePassword: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\n\n  const newPassword: AbstractControl = control.get('newPassword');\n  const confirmPassword: AbstractControl = control.get('confirmPassword');\n  let same: boolean = false;\n\n  try {\n    if (newPassword.value.length >= 6 && newPassword.value.length <= 12) {\n      same = newPassword.value === confirmPassword.value;\n    }\n  } catch (error) {}\n\n  if (same && control.get('confirmPassword').dirty) {\n    return null;\n  } else {\n    return {\n      invalidPassword: true,\n    }\n  }\n}\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\n\nexport class ProfilePage implements OnInit {\n\n  updateNameForm: boolean = false;\n  updatePasswordForm: boolean = false;\n  profileError: string;\n\n  userName: string;\n\n  passwordResetForm = this.fb.group({\n    oldPassword: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(12)]),\n    newPassword: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(12)]),\n    confirmPassword: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(12)])\n  }, {\n    validators: [comparePassword, checkPasswordChanged]\n  })\n\n  constructor(private fb: FormBuilder, private authService: AuthService, private toasterService: ToasterService) {}\n\n  ngOnInit() {}\n\n  ionViewDidEnter() {\n    this.authService.getUserDetails().pipe(take(1)).subscribe(\n      (user: {\n        name: string\n      }) => {\n        this.userName = user.name;\n      }, (error: string) => {\n        this.profileError = error;\n      }\n    )\n  }\n\n  updateName(form: NgForm): void {\n    const name: string = form.value.name;\n\n    this.authService.updateUserName(name).subscribe(\n      (user: {\n        name: string,\n        message: string\n      }) => {\n        this.userName = user.name;\n        this.updateNameForm = false;\n        form.reset();\n        this.toasterService.presentToast(\"Success\", user.message, 2000);\n      }, (error: string) => {\n        this.toasterService.presentToast('Failure!!', error, 2000, 'danger');\n      }\n    )\n  }\n\n  updatePassword(form: NgForm): void {\n    const newPassword: string = form.value.newPassword.trim();\n    const oldPassword: string = form.value.oldPassword.trim();\n\n    this.authService.updateUserPassword(newPassword, oldPassword).subscribe(\n      (result: {\n        message: string\n      }) => {\n        this.updatePasswordForm = false;\n        form.reset();\n        this.toasterService.presentToast(\"Success\", result.message, 2000);\n      }, (error: string) => {\n        this.toasterService.presentToast('Failure!!', error, 2000, 'danger');\n      }\n    );\n  }\n\n}\n"],"sourceRoot":"webpack:///"}